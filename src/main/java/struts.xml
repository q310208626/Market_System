<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
    "http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>
	<constant name="struts.enable.DynamicMethodInvocation" value="true"></constant>
	<constant name="struts.objectFactory" value="spring" />
	<!-- 总是确保使用spring的自动装备策略 -->
	<constant name="struts.objectFactory.spring.autoWire.alwaysRespect" value="true" />
	
	<package name="struts-global" namespace="/" extends="struts-default">
		
		<global-results>
			<result name="userNotFound">/web_resource/error_jsp/user_not_found.jsp
			</result>
		</global-results>
		
		<global-exception-mappings>
			<exception-mapping result="userNotFound" exception="com.lsj.market.exception.UserNotFoundException"></exception-mapping>
		</global-exception-mappings>
	</package>
	
	<package name="com.lsj.market.action" extends="struts-default">

		<action name="toRegistAction" class="com.lsj.market.action.ToRegistAction">
			<result name="success">/web_resource/regist.jsp</result>
		</action>
		<action name="toIndexAction" class="com.lsj.market.action.ToIndexAction">
			<result name="success">/index.jsp</result>
		</action>	
	</package>
	
	<!--User 管理-->
	<package name="com.lsj.market.action.user" extends="struts-global">
		<action name="registAction" class="com.lsj.market.action.user.UserRegistAction" method="execute" >
			<result name="success">/web_resource/useraction_success.jsp</result>
			<result name="error">/error.jsp</result>
		</action> 
		<action name="userDeleteAction" class="com.lsj.market.action.user.UserDeleteAction">
			<result name="success">/web_resource/regist.jsp</result>
			<result name="error">/error.jsp</result>
		</action>
		<action name="userLoginAction" class="com.lsj.market.action.user.UserLoginAction">
			<result name="success">/web_resource/useraction_success.jsp</result>
			<result name="error">/error.jsp</result>
		</action>
		<action name="userLogoutAction" class="com.lsj.market.action.user.UserLogoutAction">
			<result name="success">/index.jsp</result>
		</action>
		<action name="userUpdateAction" class="com.lsj.market.action.user.UserUpdateAction">
			<result name="success" type="redirectAction">
				<param name="actionName">getUserDetailAction</param>
			</result>
			<result name="error">/error.jsp</result>
		</action>
		<action name="toUserDetailAction" class="com.lsj.market.action.user.ToUserDetailAction">
			<result name="customer">/web_resource/userdetail.jsp</result>
			<result name="rootter">/web_resource/rootdetail.jsp</result>
			<result name="error">/error.jsp</result>
		</action>
		<action name="getUserDetailAction" class="com.lsj.market.action.user.GetUserDetailAction">
			<result name="success">/web_resource/update_userInfo.jsp</result>
		</action>
		<action name="getUserPwdAction" class="com.lsj.market.action.user.GetUserPwdAction">
			<result name="success">/web_resource/update_userpwd.jsp</result>
		</action>
		<action name="userUpdatePwdAction" class="com.lsj.market.action.user.UserUpdatePwdAction">
			<result name="success">/web_resource/useraction_success.jsp</result>
			<result name="error">/error.jsp</result>
		</action>
	</package>
	
	<!-- Flower 管理-->
	<package name="com.lsj.market.action.flower" extends="struts-global">
		<!-- 跳转到Flower管理页面 -->
		<action name="toFlowerManagerAction" class="com.lsj.market.action.flower.ToFlowerManagerAction">
			<result name="success">/web_resource/flower_resource/flower_manager.jsp</result>
		</action>
		<!-- 获取商品信息 -->
		<action name="getFlowerInfoAction" class="com.lsj.market.action.flower.GetFlowerInfoAction">
			<result name="success">/web_resource/flower_resource/flower_show.jsp</result>
			<result name="error">/error.jsp</result>
		</action>
		<!-- a标签重定向 -->
		<action name="toFlowerDirectionAction" class="com.lsj.market.action.flower.ToFlowerDirectionAction">
			<result name="flowerinfo" type="redirectAction">
				<param name="actionName">getFlowerInfoAction</param>
			</result>
			<result name="floweradd" type="redirectAction">
				<param name="actionName">toFlowerAddAction</param>
			</result>
			<result name="flowerupdate"  type="redirectAction">
				<param name="actionName">toFlowerUpdateAction</param>
			</result>
			<result name="flowercate">/web_resource/flower_resource/flower_cate.jsp</result>
		</action>
		<!-- 添加商品 -->
		<action name="flowerAddAction" class="com.lsj.market.action.flower.FlowerAddAction" >
			<!-- 文件拦截器 -->
			<interceptor-ref name="fileUpload">
				 <param name="allowedTypes">   
                    image/bmp,image/png,image/gif,image/jpeg,image/pjpeg,image/jpg
                </param>   
				<param name="maximumSize">5242880</param>
			</interceptor-ref>
			<interceptor-ref name="defaultStack"></interceptor-ref>
			<param name="savePath">/home/hdmi/work/project_resource/market_resource/uploadImages</param>
			<result name="success" type="redirectAction" >
				<param name="actionName">getFlowerInfoAction</param>
			</result>
			<result name="error">/error.jsp</result>
			<result name="input">/error.jsp</result>
		</action>
		<action name="toFlowerAddAction" class="com.lsj.market.action.flower.ToFlowerAddAction" >
			<result name="success">/web_resource/flower_resource/flower_add.jsp</result>
			<result name="error">/error.jsp</result>
		</action>
		<action name="toFlowerUpdateAction" class="com.lsj.market.action.flower.ToFlowerUpdateAction">
			<result name="success">/web_resource/flower_resource/flower_update.jsp</result>
			<result name="error">/error.jsp</result>
		</action>
		<action name="flowerUpdateAction" class="com.lsj.market.action.flower.FlowerUpdateAction">
			<param name="savePath">/home/hdmi/work/project_resource/market_resource/uploadImages</param>
			<result name="success" type="redirectAction">
				<param name="actionName">toFlowerUpdateAction</param>
			</result>
			<result name="error">/error.jsp</result>
		</action>
		<action name="flowerDeleteAction" class="com.lsj.market.action.flower.FlowerDeleteAction" >
			<result name="success" type="redirectAction">
				<param name="actionName">toFlowerUpdateAction</param>
			</result>
			<result name="error">/error.jsp</result>
		</action>
		<!-- flower category -->
		<action name="flowerCateAddAction" class="com.lsj.market.action.flower.FlowerCateAddAction">
			<result name="success">/web_resource/flower_resource/flower_cate.jsp</result>
			<result name="error">/error.jsp</result>
		</action>
		
		<action name="getFlowerCateAction" class="com.lsj.market.action.flower.GetFlowerCateAction" >
			<result name="success">/web_resource/flower_resource/flower_cate_show.jsp</result>
			<result name="error">/error.jsp</result>
		</action>
		<action name="flowerCateDeleteAction" class="com.lsj.market.action.flower.FlowerCateDeleteAction">
			<result name="success" type="redirectAction">
				<param name="actionName">getFlowerCateAction</param>
			</result>
			<result name="error">/error.jsp</result>
		</action>
		<action name="flowerCateUpdateAction" class="com.lsj.market.action.flower.FlowerCateUpdateAction">
			<result name="success" type="redirectAction">
				<param name="actionName">getFlowerCateAction</param>
			</result>
			<result name="error">/error.jsp</result>
		</action>
	</package>
	
	<!-- Order配置 -->
	<package name="com.lsj.market.action.order" extends="struts-global" >
	
		<!-- marketCar Action -->
		<action name="marketCarAddAction" class="com.lsj.market.action.order.MarketCarAddAction" >
			<result name="success" type="redirectAction">
				<param name="actionName">getFlowerInfoAction</param>
			</result>
			<result name="error">/error.jsp</result>
		</action>
		<action name="getMarketCarAction" class="com.lsj.market.action.order.GetMarketCarAction">
			<result name="success">/web_resource/order_resource/marketcar.jsp</result>
			<!-- <exception-mapping result="error" exception="com.lsj.market.exception.UserNotFoundException"></exception-mapping> -->
			<result name="error">/error.jsp</result>
		</action>
		<action name="marketCarDeleteAction" class="com.lsj.market.action.order.MarketCarDeleteAction">
			<result name="success" type="redirectAction">
				<param name="actionName">getMarketCarAction</param>
			</result>
			<result name="error">/error.jsp</result>
		</action>
		<action name="marketCarUpdateAction" class="com.lsj.market.action.order.MarketCarUpdateAction">
			<result name="success" type="redirectAction">
				<param name="actionName">getMarketCarAction</param>
			</result>
			<result name="error">/error.jsp</result>
		</action>
		
		<!-- Order Action -->
		<action name="orderAddAction" class="com.lsj.market.action.order.OrderAddAction">
			<result name="success" type="redirectAction">
				<param name="actionName">getMarketCarAction</param>
			</result>
			<result name="error">/error.jsp</result>
		</action>
		<action name="getOrderAction" class="com.lsj.market.action.order.GetOrderAction">
			<result name="success">/web_resource/order_resource/order_show.jsp</result>
			<result name="error">/error.jsp</result>
		</action>
		<action name="getDetailOrderAction" class="com.lsj.market.action.order.GetDetailOrderAction">
			<result name="success">/web_resource/order_resource/detailorder_show.jsp</result>
			<result name="error">/error.jsp</result>
		</action>
	</package>
	
</struts>